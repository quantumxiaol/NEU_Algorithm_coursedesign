# Word

Word.cpp 是搜索引擎项目中用于单词提取、编码管理、临时索引生成的核心模块。它主要实现以下功能

从网页文件中提取清洗后的单词

使用 字典树（Trie）结构 管理全局单词表 WordDictionary

构建倒排索引所需的临时索引数据：

index1: <word_id, doc_id> 基础索引

indexfre: <word_id, <doc_id, frequency>> 带词频的索引

统计每个文档中单词的出现频率

提供向磁盘写入索引和词表的功能

包含调试用的打印函数，便于开发时查看中间结果

该模块是构建搜索引擎倒排索引的基础。

## 数据结构

|结构|描述|
|----|----|
|vector<string> WORDLIST|全局单词列表，保存所有被识别的单词|
|vector<pair<int, int>> index|倒排索引基础结构，记录 <word_id, doc_id>|
|vector<pair<int, pair<int, int>>> indexfre|带词频的索引结构，记录 <word_id, <doc_id, frequency>>|
|WordDictionary|字典树类，用于单词是否存在判断及 ID 分配|

## 字典树

定义了一个TrieNode结构体来表示字典树中的节点。每个节点包含以下成员：

vector<TrieNode *> child;：指向子节点的指针数组，大小为67，代表可能字符的范围（包括小写和大写字母、数字、连字符、点号等特殊符号）。
bool isEnd;：标志位，用来指示该节点是否是一个单词的结尾。
int wordid;：当isEnd为真时，这个字段保存对应单词的唯一标识符。

插入操作insert()函数用于向字典树中添加一个新单词及其对应的ID。遍历单词中的每一个字符，并根据其ASCII值映射到subscript()函数返回的索引位置。如果当前路径不存在，则创建新的节点。

查找操作通过递归的方式进行，即dfs()或dfsid()函数。从根节点开始，尝试匹配单词中的每个字符。如果遇到不匹配的情况，则直接返回失败；如果能够顺利到达单词末尾并且当前节点标记为单词结束(isEnd)，则查找成功。

对于获取单词ID的操作，可以使用searchwordid()方法，它内部调用了dfsid()来进行深度优先搜索并返回找到的单词ID。

辅助函数
subscript(char ch)：将字符转换成字典树中对应子节点的索引。例如，'a'-'z'映射到0-25，'A'-'Z'映射到26-51等。

## 缺点与改进空间

1. 字符集有限，映射不够通用
目前只支持 67 种字符，虽然能处理英文、数字、常见标点，但无法支持：
Unicode 字符（如中文、日文、俄语等）
更多特殊符号（如 @ # [ ] { } 等）
(所以只敢处理英文网页，当时就是特别头疼这个中文分词)

2. 性能瓶颈（插入/查询效率）
每次插入都使用 new TrieNode() 动态分配内存，频繁调用会影响性能。
查询使用递归实现，在大数据量下可能导致栈溢出或效率下降。

3. 不支持大小写统一存储
当前 Trie 中 'a' 和 'A' 是两个不同的字符，会被视为不同的节点。
在搜索引擎中，通常希望忽略大小写进行统一处理。
